<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DevStack-Vibes â€” Innovate with Every Stack</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <meta name="description" content="DevStack-Vibes â€” Build modern web, mobile, and backend solutions. Discover our projects, learn coding, and get inspired by tech innovation." />
  <meta name="robots" content="index, follow" />
  <link rel="icon" href="images/logo.png" type="image/png" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "url": "https://www.devstack-vibes.com",
    "logo": "https://www.devstack-vibes.com/images/logo.png",
    "name": "DevStack-Vibes",
    "description": "Innovate with every stack â€” discover tech solutions and full-stack insights."
  }
  </script>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* Your complete CSS styles remain exactly the same */
    :root{
      --bg: #0b0f1c;
      --bg-2: #071122;
      --card: #0f1724;
      --muted: #94a3b8;
      --accent-1: #00d4ff;
      --accent-2: #8b5cf6;
      --accent-3: #f59e0b;
      --text: #e6eef8;
      --glass: rgba(255,255,255,0.05);
      --glass-2: rgba(255,255,255,0.02);
      --success: #10b981;
      --danger: #fb7185;
      --radius: 16px;
      --max-width: 1200px;
    }

    :root.light{
      --bg: #ffffff;
      --bg-2: #f7fafc;
      --card: #ffffff;
      --muted: #475569;
      --accent-1: #0ea5e9;
      --accent-2: #7c3aed;
      --accent-3: #d97706;
      --text: #0b1220;
      --glass: rgba(11,18,32,0.05);
      --glass-2: rgba(11,18,32,0.02);
      --success: #059669;
      --danger: #ef4444;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Space Grotesk","Poppins",system-ui,-apple-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: linear-gradient(180deg,var(--bg), var(--bg-2) 120%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.6;
      transition: background .35s ease, color .35s ease;
      overflow-x: hidden;
    }

    a{color:inherit; text-decoration:none}

    header{
      position:sticky; top:0; z-index:60;
      backdrop-filter: blur(12px);
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
      border-bottom: 1px solid rgba(255,255,255,0.05);
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 6%;
      gap:12px;
      transition: all 0.3s ease;
    }
    
    header.scrolled {
      padding: 10px 6%;
      background: rgba(11, 15, 28, 0.9);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    
    .brand{display:flex; gap:14px; align-items:center;}
    .brand img{height:48px; width:auto; border-radius:10px}
    .brand h1{font-size:1.25rem; margin:0; letter-spacing:0.2px; font-weight:700; background: linear-gradient(90deg, var(--accent-1), var(--accent-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
    .brand p{margin:0;font-size:0.8rem;color:var(--muted)}

    nav{display:flex; gap:18px; align-items:center;}
    nav a{
      color:var(--text); text-decoration:none; font-weight:600; font-size:0.95rem;
      padding:8px 14px; border-radius:10px; opacity:0.98;
      position: relative;
      transition: all 0.3s ease;
    }
    nav a:after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 50%;
      background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
      transition: all 0.3s ease;
      transform: translateX(-50%);
    }
    nav a:hover{color:var(--accent-1); transform:translateY(-2px)}
    nav a:hover:after { width: 80%; }

    .topbar-actions{display:flex; gap:12px; align-items:center}
    .icon-btn{background:transparent; border:1px solid rgba(255,255,255,0.08); padding:10px; border-radius:10px; cursor:pointer; font-size:16px; transition: all 0.3s ease;}
    .icon-btn:hover{transform:translateY(-2px); background: var(--glass);}

    .btn{
      display:inline-flex; align-items:center; gap:8px;
      background: linear-gradient(90deg,var(--accent-1),var(--accent-2));
      color:white; border:none; padding:12px 20px; border-radius:12px; cursor:pointer; font-weight:700;
      box-shadow: 0 10px 30px rgba(124,58,237,0.15);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .btn:before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: all 0.6s ease;
    }
    .btn:hover:before {
      left: 100%;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(124,58,237,0.25);
    }
    
    .btn.secondary {
      background:transparent; color:var(--text); border:1px solid rgba(255,255,255,0.08);
      box-shadow:none; font-weight:600;
    }
    .btn.secondary:hover {
      background: var(--glass);
      border-color: var(--accent-1);
    }

    .hero{
      max-width:var(--max-width); margin:40px auto 20px; padding:40px; border-radius:24px;
      background: linear-gradient(135deg, rgba(6,182,212,0.08), rgba(124,58,237,0.06));
      display:grid; grid-template-columns: 1fr 420px; gap:32px; align-items:center;
      box-shadow: 0 20px 60px rgba(2,6,23,0.5);
      position: relative;
      overflow: hidden;
    }
    .hero:before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(139,92,246,0.05) 0%, transparent 70%);
      z-index: -1;
    }
    
    .hero-left h2{font-size:2.5rem; margin:0 0 14px; line-height: 1.2;}
    .tagline{font-size:1.25rem; color:var(--muted); margin-bottom:18px; font-weight: 400;}
    .hero-left p{color:var(--muted); max-width:720px; font-size: 1.05rem;}

    .hero-cta{display:flex; gap:16px; align-items:center; margin-top:28px}

    .hero-right{
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:18px; padding:24px; border:1px solid rgba(255,255,255,0.05);
      box-shadow: 0 12px 32px rgba(2,6,23,0.4);
      backdrop-filter: blur(10px);
    }
    .stats{display:flex; gap:14px; justify-content:space-between;}
    .stat{flex:1; background:var(--glass); padding:18px; border-radius:12px; text-align:center; transition: all 0.3s ease;}
    .stat:hover { transform: translateY(-5px); background: rgba(255,255,255,0.08); }
    .stat h3{margin:0; font-size:1.5rem; font-weight: 700;}
    .stat p{margin:6px 0 0; color:var(--muted); font-size:0.9rem}

    section{padding:80px 6%; position: relative;}
    .container{max-width:var(--max-width); margin:0 auto; position: relative; z-index: 2;}
    
    h3.section-title{
      color:var(--accent-1); 
      text-align:center; 
      margin-bottom:16px; 
      font-size:1.75rem;
      font-weight: 700;
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
    }
    h3.section-title:after {
      content: '';
      position: absolute;
      width: 60%;
      height: 3px;
      bottom: -8px;
      left: 20%;
      background: linear-gradient(90deg, transparent, var(--accent-1), transparent);
    }
    
    p.lead{text-align:center; color:var(--muted); max-width:820px; margin:0 auto 28px; font-size: 1.1rem;}

    .grid{display:grid; grid-template-columns: repeat(auto-fit,minmax(280px,1fr)); gap:24px}
    .card{
      background: linear-gradient(180deg,var(--card), rgba(0,0,0,0.02));
      border-radius:18px; padding:24px; border:1px solid var(--glass-2);
      transition: transform .35s cubic-bezier(.22,.9,.37,1), box-shadow .35s;
      box-shadow: 0 12px 36px rgba(2,6,23,0.4);
      position: relative;
      overflow: hidden;
    }
    .card:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
    }
    .card:hover{ transform: translateY(-12px); box-shadow: 0 28px 60px rgba(2,6,23,0.6) }

    .service-title{display:flex; align-items:center; gap:16px; margin-bottom: 12px;}
    
    .service-logo {
        width: 52px; 
        height: 52px; 
        border-radius: 12px; 
        display: flex; 
        align-items: center; 
        justify-content: center;
        flex-shrink: 0;
        background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
        box-shadow: 0 6px 16px rgba(124,58,237,0.3);
        transition: transform .4s ease;
    }
    .card:hover .service-logo {
        transform: scale(1.1) rotate(5deg);
    }
    .service-logo img {
        width: 60%;
        height: 60%;
        object-fit: contain;
        filter: brightness(0) invert(1);
    }

    .service-title h4{margin:0; font-size:1.15rem; font-weight: 600;}
    .service-desc{color:var(--muted); margin-top:12px; font-size:0.95rem; line-height: 1.6;}

    .project-card{
      cursor:pointer; 
      display:flex; 
      flex-direction:column; 
      gap:16px;
      height: 100%;
    }
    .project-card:hover .project-title{color:var(--accent-2)}
    .project-title{font-size:1.15rem; margin:0; font-weight:700}
    .project-desc{color:var(--muted); margin:0; flex-grow: 1;}

    .pill{
      padding:8px 14px; 
      border-radius:999px; 
      background:var(--glass); 
      font-weight:600; 
      font-size:0.85rem; 
      color:var(--muted); 
      display:inline-block;
      transition: all 0.3s ease;
    }
    .pill:hover {
      background: rgba(255,255,255,0.1);
      transform: translateY(-2px);
    }

    .contact-container {
      max-width: 980px; 
      margin: 0 auto; 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      gap: 24px; 
      padding: 30px 0;
    }
    
    .msg{padding:12px 16px;border-radius:12px;margin-top:8px;font-weight:700}
    .msg.success{background:rgba(16,185,129,0.12); color:var(--success);border:1px solid rgba(16,185,129,0.08)}
    .msg.error{background:rgba(239,68,68,0.08); color:var(--danger);border:1px solid rgba(239,68,68,0.06)}

    .socials{display:flex; gap:12px; justify-content:center; margin-top:16px}
    .socials a{
      display:inline-flex; 
      align-items:center; 
      justify-content:center; 
      width:48px; 
      height:48px; 
      border-radius:12px; 
      border:1px solid rgba(255,255,255,0.05); 
      background:var(--glass); 
      transition:transform .25s, box-shadow .25s;
      position: relative;
      overflow: hidden;
    }
    .socials a:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }
    .socials a:hover:before {
      opacity: 1;
    }
    .socials a:hover{
      transform:translateY(-6px) scale(1.05); 
      box-shadow: 0 16px 40px rgba(2,6,23,0.5);
      border-color: transparent;
    }

    .footer{
      padding:40px 6%; 
      text-align:center; 
      color:var(--muted); 
      border-top:1px dashed rgba(255,255,255,0.05);
      background: rgba(0,0,0,0.1);
    }

    #backTop{
      position:fixed; 
      right:24px; 
      bottom:24px; 
      z-index:80; 
      display:none;
      background:linear-gradient(135deg,var(--accent-1),var(--accent-2)); 
      color:white; 
      border:none;
      padding:14px 16px; 
      border-radius:14px; 
      cursor:pointer; 
      box-shadow:0 12px 36px rgba(124,58,237,0.2);
      transition: all 0.3s ease;
    }
    #backTop:hover {
      transform: translateY(-4px);
      box-shadow:0 16px 40px rgba(124,58,237,0.3);
    }

    .fade-in{opacity:0;transform:translateY(20px); transition: opacity 0.8s ease, transform 0.8s ease;}
    .fade-in.visible{opacity:1; transform:translateY(0);}
    
    .floating-elements {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      overflow: hidden;
      z-index: 1;
      pointer-events: none;
    }
    
    .floating-element {
      position: absolute;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent-1), var(--accent-2));
      opacity: 0.05;
      animation: float 20s infinite linear;
    }
    
    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
      100% { transform: translateY(0) rotate(360deg); }
    }

    .auth-container {
      max-width: 500px;
      margin: 40px auto;
      padding: 40px;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 20px 60px rgba(2,6,23,0.5);
      border: 1px solid var(--glass-2);
    }
    
    .auth-tabs {
      display: flex;
      margin-bottom: 30px;
      border-bottom: 1px solid var(--glass-2);
    }
    
    .auth-tab {
      flex: 1;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
    }
    
    .auth-tab.active {
      color: var(--accent-1);
      border-bottom: 3px solid var(--accent-1);
    }
    
    .auth-form {
      display: none;
    }
    
    .auth-form.active {
      display: block;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }
    
    .form-control {
      width: 100%;
      padding: 14px;
      border-radius: 10px;
      border: 1px solid var(--glass-2);
      background: var(--bg);
      color: var(--text);
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--accent-1);
      box-shadow: 0 0 0 3px rgba(6,182,212,0.1);
    }
    
    .whatsapp-banner {
      background: linear-gradient(135deg, rgba(37, 211, 102, 0.1), rgba(37, 211, 102, 0.05));
      border: 1px solid rgba(37, 211, 102, 0.2);
      border-radius: 12px;
      padding: 20px;
      margin-top: 20px;
      text-align: center;
    }
    
    .whatsapp-banner h4 {
      margin: 0 0 10px 0;
      color: #25D366;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .whatsapp-banner p {
      margin: 0 0 15px 0;
      color: var(--muted);
      font-size: 0.95rem;
    }
    
    .btn-whatsapp {
      background: linear-gradient(135deg, #25D366, #128C7E);
      color: white;
    }
    
    .btn-whatsapp:hover {
      background: linear-gradient(135deg, #128C7E, #25D366);
      transform: translateY(-2px);
    }

    .dashboard {
      display: none;
      min-height: 80vh;
    }
    
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--glass-2);
    }
    
    .dashboard-nav {
      display: flex;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .dashboard-nav a {
      padding: 12px 20px;
      background: var(--glass);
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .dashboard-nav a.active {
      background: linear-gradient(90deg, var(--accent-1), var(--accent-2));
      color: white;
    }
    
    .dashboard-section {
      display: none;
    }
    
    .dashboard-section.active {
      display: block;
    }
    
    .task-card {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid var(--glass-2);
      transition: all 0.3s ease;
    }
    
    .task-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(2,6,23,0.4);
    }
    
    .task-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }
    
    .task-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin: 0;
    }
    
    .task-status {
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }
    
    .status-pending {
      background: rgba(245, 158, 11, 0.1);
      color: var(--accent-3);
    }
    
    .status-completed {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }
    
    .task-desc {
      color: var(--muted);
      margin-bottom: 15px;
    }
    
    .task-meta {
      display: flex;
      gap: 15px;
      font-size: 0.9rem;
      color: var(--muted);
    }
    
    .task-actions {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    
    .user-card {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid var(--glass-2);
      transition: all 0.3s ease;
    }
    
    .user-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(2,6,23,0.4);
    }
    
    .user-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .user-info h4 {
      margin: 0 0 5px 0;
      font-size: 1.1rem;
    }
    
    .user-info p {
      margin: 0;
      color: var(--muted);
      font-size: 0.9rem;
    }
    
    .user-actions {
      display: flex;
      gap: 10px;
    }
    
    .btn-small {
      padding: 8px 12px;
      font-size: 0.85rem;
    }
    
    .btn-danger {
      background: linear-gradient(90deg, #ef4444, #dc2626);
    }
    
    .btn-warning {
      background: linear-gradient(90deg, #f59e0b, #d97706);
    }
    
    .admin-panel {
      display: none;
    }
    
    .admin-panel.active {
      display: block;
    }
    
    .task-form {
      background: var(--card);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 30px;
      border: 1px solid var(--glass-2);
    }
    
    .form-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .form-row .form-group {
      flex: 1;
      margin-bottom: 0;
    }
    
    .performance-chart {
      background: var(--card);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 30px;
      border: 1px solid var(--glass-2);
    }
    
    .chart-placeholder {
      height: 300px;
      background: var(--bg);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--muted);
      font-size: 1.1rem;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 100;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background: var(--card);
      border-radius: 18px;
      padding: 30px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      border: 1px solid var(--glass-2);
      box-shadow: 0 20px 60px rgba(2,6,23,0.8);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--glass-2);
    }
    
    .modal-title {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 700;
    }
    
    .close-modal {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--muted);
      transition: color 0.3s ease;
    }
    
    .close-modal:hover {
      color: var(--danger);
    }
    
    .announcement-card {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid var(--glass-2);
      transition: all 0.3s ease;
    }
    
    .announcement-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(2,6,23,0.4);
    }
    
    .announcement-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }
    
    .announcement-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin: 0;
    }
    
    .announcement-date {
      color: var(--muted);
      font-size: 0.9rem;
    }
    
    .announcement-desc {
      color: var(--muted);
      margin-bottom: 15px;
      line-height: 1.6;
    }
    
    .announcement-form {
      background: var(--card);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 30px;
      border: 1px solid var(--glass-2);
    }
    
    @media (max-width:940px){
      .hero{grid-template-columns:1fr; padding:28px}
      nav{display:none}
      .hero-left h2 { font-size: 2rem; }
    }
    @media (max-width:768px){
      header { padding: 12px 4%; }
      .brand h1{font-size:1.1rem}
      .hero-right{order:2}
      .hero-cta { flex-direction: column; align-items: flex-start; }
      .btn { width: 100%; justify-content: center; }
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      .task-actions {
        flex-direction: column;
      }
    }
    
    @media (max-width:640px){
      section { padding: 60px 4%; }
      .hero { margin: 20px auto; padding: 20px; }
      .hero-left h2 { font-size: 1.75rem; }
      .tagline { font-size: 1.1rem; }
      .grid { grid-template-columns: 1fr; }
      .auth-container {
        padding: 25px 20px;
      }
      .modal-content {
        padding: 20px;
        width: 95%;
      }
    }

    /* Loading spinner */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="logo.png" alt="DevStack-Vibes logo" onerror="this.style.display='none'">
      <div>
        <h1>DevStack-Vibes</h1>
        <p>Innovate with every stack</p>
      </div>
    </div>

    <div style="display:flex;align-items:center;gap:16px">
      <nav aria-label="Primary navigation">
        <a href="#about" class="nav-link">About</a>
        <a href="#services" class="nav-link">Services</a>
        <a href="#portfolio" class="nav-link">Portfolio</a>
        <a href="#contact" class="nav-link">Contact</a>
        <a href="#" id="authLink">Join Us</a>
      </nav>

      <div class="topbar-actions">
        <button id="themeToggle" class="icon-btn" title="Toggle light / dark">ðŸŒ™</button>
        <a class="btn" href="#" id="joinUsBtn">Join Us</a>
      </div>
    </div>
  </header>

  <main>
    <!-- Authentication Section -->
    <section id="auth" class="container" style="display: none;">
      <div class="auth-container">
        <div class="auth-tabs">
          <div class="auth-tab active" data-tab="login">Login</div>
          <div class="auth-tab" data-tab="signup">Sign Up</div>
        </div>
        
        <div class="auth-form active" id="login-form">
          <h3 style="text-align: center; margin-bottom: 25px;">Welcome Back</h3>
          <div class="form-group">
            <label for="login-email">Email</label>
            <input type="email" id="login-email" class="form-control" placeholder="your@email.com">
          </div>
          <div class="form-group">
            <label for="login-password">Password</label>
            <input type="password" id="login-password" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>
          <button class="btn" style="width: 100%;" onclick="login()">Login</button>
          <div id="login-message" style="margin-top: 15px;"></div>
        </div>
        
        <div class="auth-form" id="signup-form">
          <h3 style="text-align: center; margin-bottom: 25px;">Join DevStack-Vibes</h3>
          <div class="form-group">
            <label for="signup-name">Full Name</label>
            <input type="text" id="signup-name" class="form-control" placeholder="Name">
          </div>
          <div class="form-group">
            <label for="signup-email">Email</label>
            <input type="email" id="signup-email" class="form-control" placeholder="your@email.com">
          </div>
          <div class="form-group">
            <label for="signup-password">Password</label>
            <input type="password" id="signup-password" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>
          <div class="form-group">
            <label for="signup-role">Role</label>
            <select id="signup-role" class="form-control">
              <option value="developer">Developer</option>
              <option value="designer">Designer</option>
              <option value="student">Student</option>
            </select>
          </div>
          <button class="btn" style="width: 100%;" onclick="signup()">Create Account</button>
          <div id="signup-message" style="margin-top: 15px;"></div>
        </div>
      </div>
    </section>

    <!-- User Dashboard -->
    <section id="dashboard" class="container dashboard">
      <div class="dashboard-header">
        <div>
          <h2>Welcome, <span id="user-name">User</span></h2>
          <p id="user-role" style="color: var(--muted); margin: 0;">Role</p>
        </div>
        <button class="btn secondary" onclick="logout()">Logout</button>
      </div>
      
      <div class="dashboard-nav">
        <a href="#" class="dashboard-nav-link active" data-section="tasks">My Tasks</a>
        <a href="#" class="dashboard-nav-link" data-section="announcements">Announcements</a>
        <a href="#" class="dashboard-nav-link" data-section="performance">Performance</a>
        <a href="#" class="dashboard-nav-link" data-section="profile">Profile</a>
      </div>
      
      <div class="dashboard-section active" id="tasks-section">
        <h3 style="margin-bottom: 20px;">Assigned Tasks</h3>
        <div id="tasks-container">
          <!-- Tasks will be populated here -->
        </div>
      </div>
      
      <div class="dashboard-section" id="announcements-section">
        <h3 style="margin-bottom: 20px;">Announcements</h3>
        <div id="announcements-container">
          <!-- Announcements will be populated here -->
        </div>
      </div>
      
      <div class="dashboard-section" id="performance-section">
        <h3 style="margin-bottom: 20px;">Performance Analytics</h3>
        <div class="performance-chart">
          <div class="chart-placeholder">
            Performance Chart - Tasks Completed vs Time
          </div>
        </div>
        <div class="stats" style="margin-top: 20px;">
          <div class="stat">
            <h3 id="completed-tasks">0</h3>
            <p>Tasks Completed</p>
          </div>
          <div class="stat">
            <h3 id="pending-tasks">0</h3>
            <p>Tasks Pending</p>
          </div>
          <div class="stat">
            <h3 id="success-rate">0%</h3>
            <p>Success Rate</p>
          </div>
        </div>
      </div>
      
      <div class="dashboard-section" id="profile-section">
        <h3 style="margin-bottom: 20px;">Profile Information</h3>
        <div class="card">
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="profile-name" class="form-control" value="">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="profile-email" class="form-control" value="" readonly>
          </div>
          <div class="form-group">
            <label>Role</label>
            <input type="text" id="profile-role" class="form-control" value="" readonly>
          </div>
          <div class="form-group">
            <label>Member Since</label>
            <input type="text" id="profile-joined" class="form-control" value="" readonly>
          </div>
          <button class="btn" onclick="updateProfile()">Update Profile</button>
        </div>
      </div>
    </section>

    <!-- Admin Panel -->
    <section id="admin-panel" class="container dashboard admin-panel">
      <div class="dashboard-header">
        <div>
          <h2>Admin Dashboard</h2>
          <p style="color: var(--muted); margin: 0;">Manage Users & Tasks</p>
        </div>
        <button class="btn secondary" onclick="logout()">Logout</button>
      </div>
      
      <div class="dashboard-nav">
        <a href="#" class="admin-nav-link active" data-section="users">Manage Users</a>
        <a href="#" class="admin-nav-link" data-section="task-management">Task Management</a>
        <a href="#" class="admin-nav-link" data-section="announcements-management">Announcements</a>
        <a href="#" class="admin-nav-link" data-section="analytics">Analytics</a>
      </div>
      
      <div class="dashboard-section active" id="users-section">
        <h3 style="margin-bottom: 20px;">User Management</h3>
        <div id="users-container">
          <!-- Users will be populated here -->
        </div>
      </div>
      
      <div class="dashboard-section" id="task-management-section">
        <h3 style="margin-bottom: 20px;">Task Management</h3>
        <div class="task-form">
          <h4 style="margin-top: 0;">Create New Task</h4>
          <div class="form-row">
            <div class="form-group">
              <label for="task-title">Task Title</label>
              <input type="text" id="task-title" class="form-control" placeholder="Enter task title">
            </div>
            <div class="form-group">
              <label for="task-deadline">Deadline</label>
              <input type="date" id="task-deadline" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label for="task-description">Task Description</label>
            <textarea id="task-description" class="form-control" rows="4" placeholder="Describe the task in detail"></textarea>
          </div>
          <div class="form-group">
            <label for="task-classroom-link">Google Classroom Link</label>
            <input type="url" id="task-classroom-link" class="form-control" placeholder="https://classroom.google.com/c/ODMwNDA0ODc2NTcx?cjc=qsmnrq6d" value="https://classroom.google.com/c/ODMwNDA0ODc2NTcx?cjc=qsmnrq6d">
          </div>
          <button class="btn" onclick="createTask()">Assign to All Users</button>
        </div>
        
        <h4 style="margin: 30px 0 20px;">Existing Tasks</h4>
        <div id="admin-tasks-container">
          <!-- Admin tasks will be populated here -->
        </div>
      </div>
      
      <div class="dashboard-section" id="announcements-management-section">
        <h3 style="margin-bottom: 20px;">Announcement Management</h3>
        <div class="announcement-form">
          <h4 style="margin-top: 0;">Create New Announcement</h4>
          <div class="form-group">
            <label for="announcement-title">Announcement Title</label>
            <input type="text" id="announcement-title" class="form-control" placeholder="Enter announcement title">
          </div>
          <div class="form-group">
            <label for="announcement-description">Announcement Description</label>
            <textarea id="announcement-description" class="form-control" rows="4" placeholder="Enter announcement details"></textarea>
          </div>
          <button class="btn" onclick="createAnnouncement()">Send Announcement</button>
        </div>
        
        <h4 style="margin: 30px 0 20px;">Existing Announcements</h4>
        <div id="admin-announcements-container">
          <!-- Admin announcements will be populated here -->
        </div>
      </div>
      
      <div class="dashboard-section" id="analytics-section">
        <h3 style="margin-bottom: 20px;">System Analytics</h3>
        <div class="performance-chart">
          <div class="chart-placeholder">
            System Analytics - User Activity & Task Completion
          </div>
        </div>
        <div class="stats" style="margin-top: 20px;">
          <div class="stat">
            <h3 id="total-users">0</h3>
            <p>Total Users</p>
          </div>
          <div class="stat">
            <h3 id="active-tasks">0</h3>
            <p>Active Tasks</p>
          </div>
          <div class="stat">
            <h3 id="completion-rate">0%</h3>
            <p>Avg. Completion</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Edit Task Modal -->
    <div id="editTaskModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Edit Task</h3>
          <button class="close-modal" onclick="closeEditModal()">Ã—</button>
        </div>
        <div class="form-group">
          <label for="edit-task-title">Task Title</label>
          <input type="text" id="edit-task-title" class="form-control">
        </div>
        <div class="form-group">
          <label for="edit-task-description">Task Description</label>
          <textarea id="edit-task-description" class="form-control" rows="4"></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="edit-task-deadline">Deadline</label>
            <input type="date" id="edit-task-deadline" class="form-control">
          </div>
          <div class="form-group">
            <label for="edit-task-status">Status</label>
            <select id="edit-task-status" class="form-control">
              <option value="pending">Pending</option>
              <option value="completed">Completed</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="edit-task-classroom-link">Google Classroom Link</label>
          <input type="url" id="edit-task-classroom-link" class="form-control">
        </div>
        <div style="display: flex; gap: 15px; margin-top: 25px;">
          <button class="btn" onclick="updateTask()">Update Task</button>
          <button class="btn secondary" onclick="closeEditModal()">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Main Website Content (Hidden when logged in) -->
    <div id="main-content">
      <!-- Main website content remains the same -->
      <section class="hero container" aria-labelledby="hero-heading">
        <div class="floating-elements">
          <div class="floating-element" style="width: 80px; height: 80px; top: 10%; left: 5%; animation-delay: 0s;"></div>
          <div class="floating-element" style="width: 120px; height: 120px; top: 60%; left: 80%; animation-delay: 5s;"></div>
          <div class="floating-element" style="width: 60px; height: 60px; top: 80%; left: 10%; animation-delay: 10s;"></div>
          <div class="floating-element" style="width: 100px; height: 100px; top: 30%; left: 70%; animation-delay: 15s;"></div>
        </div>
        
        <div class="hero-left fade-in">
          <h2 id="hero-heading">We craft software that <span style="background: linear-gradient(90deg, var(--accent-1), var(--accent-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">empowers businesses</span></h2>
          <div class="tagline">Innovate with every stack â€” web, desktop, mobile, and backend systems designed to scale.</div>
          <p>
            DevStack-Vibes is a forward-thinking software house delivering elegant, secure and scalable applications.
            We combine modern engineering, design thinking and cloud-ready architecture to build products that solve real problems and scale with your business.
          </p>

          <div class="hero-cta">
            <a class="btn" href="#portfolio">Explore Projects</a>
            <a class="btn secondary" href="#" id="heroJoinUsBtn">Join Us</a>
          </div>
        </div>

        <aside class="hero-right fade-in" aria-label="Highlights">
          <div style="display:flex; justify-content:space-between; align-items:center">
            <div>
              <div style="font-weight:700; font-size: 1.1rem;">DevStack-Vibes</div>
              <div style="color:var(--muted); font-size:0.9rem">Innovate with every stack</div>
            </div>
            <div style="text-align:right">
              <div style="font-size:0.85rem; color:var(--muted)">Since</div>
              <div style="font-weight:700">2024</div>
            </div>
          </div>

          <div class="stats" style="margin-top:20px">
            <div class="stat">
              <h3>11+</h3>
              <p>Projects</p>
            </div>
            <div class="stat">
              <h3>5</h3>
              <p>Services</p>
            </div>
            <div class="stat">
              <h3>100%</h3>
              <p>Client Focus</p>
            </div>
          </div>

          <div style="margin-top:20px; display:flex; gap:12px; justify-content:space-between; align-items:center; flex-wrap: wrap;">
            <a class="pill" href="https://github.com/DevStack-Vibes" target="_blank" rel="noopener">GitHub</a>
            <a class="pill" href="https://www.youtube.com/@DevStack-Vibes" target="_blank" rel="noopener">YouTube</a>
            <a class="pill" href="https://www.instagram.com/devstackvibes/" target="_blank" rel="noopener">Instagram</a>
          </div>
        </aside>
      </section>

      <section id="about" class="container">
        <div class="floating-elements">
          <div class="floating-element" style="width: 60px; height: 60px; top: 10%; left: 90%; animation-delay: 2s;"></div>
          <div class="floating-element" style="width: 80px; height: 80px; top: 80%; left: 5%; animation-delay: 8s;"></div>
        </div>
        
        <h3 class="section-title">About Us</h3>
        <p class="lead fade-in">
          DevStack-Vibes is a results-driven software house focused on creating meaningful digital products.
          We design and build web, desktop and mobile applications with robust backends and clean user interfaces.
          Our approach emphasizes maintainable code, fast performance, and measurable business outcomes so your project keeps growing.
        </p>
      </section>

      <section id="services" class="container">
        <div class="floating-elements">
          <div class="floating-element" style="width: 70px; height: 70px; top: 20%; left: 10%; animation-delay: 4s;"></div>
          <div class="floating-element" style="width: 90px; height: 90px; top: 70%; left: 85%; animation-delay: 12s;"></div>
        </div>
        
        <h3 class="section-title">Services</h3>
        <p class="lead">From prototype to production â€” we deliver full-stack services tailored to your needs.</p>

        <div class="grid" style="margin-top:28px">
          <div class="card fade-in">
            <div class="service-title">
              <div class="service-logo" aria-hidden="true">
                  <img src="https://i.ibb.co/6P01x9L/web.png" alt="Web Development Icon">
              </div>
              <h4>Web Development</h4>
              </div>
            <p class="service-desc">Responsive websites and web apps with attention to performance, SEO and accessibility. Modern stacks & PWA readiness.</p>
          </div>

          <div class="card fade-in">
            <div class="service-title">
              <div class="service-logo" aria-hidden="true">
                  <img src="https://i.ibb.co/P48g80b/desktop.png" alt="Desktop App Icon">
              </div>
              <h4>Desktop Application Development</h4>
              </div>
            <p class="service-desc">Electron, Qt or native apps with strong UX and system integration for performance-critical desktop tools.</p>
          </div>

          <div class="card fade-in">
            <div class="service-title">
              <div class="service-logo" aria-hidden="true">
                  <img src="https://i.ibb.co/308jN1d/mobile.png" alt="Mobile App Icon">
              </div>
              <h4>Android / iOS App Development</h4>
              </div>
            <p class="service-desc">Native and cross-platform apps with offline support, performant UI and smooth animations.</p>
          </div>

          <div class="card fade-in">
            <div class="service-title">
              <div class="service-logo" aria-hidden="true">
                  <img src="https://i.ibb.co/1nCqV9Q/frontend.png" alt="Frontend Icon">
              </div>
              <h4>Front-End Development</h4>
              </div>
            <p class="service-desc">Polished interfaces, accessibility-first designs, and animation-aware components for great user experiences.</p>
          </div>

          <div class="card fade-in">
            <div class="service-title">
              <div class="service-logo" aria-hidden="true">
                  <img src="https://i.ibb.co/JzG7hYg/server.png" alt="Backend/Server Icon">
              </div>
              <h4>Back-End Development</h4>
              </div>
            <p class="service-desc">Robust APIs, database design, cloud deployments and secure authentication. Scalable and maintainable architectures.</p>
          </div>
        </div>
      </section>

      <section id="portfolio" class="container">
        <div class="floating-elements">
          <div class="floating-element" style="width: 80px; height: 80px; top: 10%; left: 5%; animation-delay: 6s;"></div>
          <div class="floating-element" style="width: 60px; height: 60px; top: 80%; left: 90%; animation-delay: 14s;"></div>
        </div>
        
        <h3 class="section-title">Selected Projects</h3>
        <p class="lead">A snapshot of our work â€” click any card to open the project on GitHub.</p>

        <div class="grid" style="margin-top:28px">
          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/CodeAlpha_Cloud-Based-Bus-Pass-System')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Cloud Based Bus Pass System</div>
                <div class="project-desc">Cloud-hosted bus pass management for institutions and transit operators.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/CodeAlpha_Data-Redundancy-Removal-System')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Data Redundancy Removal System</div>
                <div class="project-desc">Tools & algorithms to detect and remove redundant data across datasets.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/CodeAlpha_Stock-Portfolio-Tracker')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Stock Portfolio Tracker</div>
                <div class="project-desc">Track investments, history & alerts for portfolio performance.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/CodeAlpha_Hangman-Game')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Hangman Game</div>
                <div class="project-desc">A simple, well-crafted educational game demonstrating clean logic and UI.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/Calculator')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Calculator</div>
                <div class="project-desc">Lightweight calculator showing UI design and functionality.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/FaceAuth')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Face Authentication</div>
                <div class="project-desc">Face recognition module for secure authentication and access control.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/Clinic-Management-System')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Clinic / Gym / Super-Market Systems</div>
                <div class="project-desc">Domain-specific management systems for operational efficiency.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/Maison-Sole')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Shoe Store Website</div>
                <div class="project-desc">E-commerce demo with product listings and cart flows.</div>
              </div>
              </div>
          </div>

          <div class="card project-card fade-in" onclick="openProject('https://github.com/DevStack-Vibes/CodeAlpha_Detecting-Data-Leaks-Using-SQL-Injection')">
            <div style="display:flex; justify-content:space-between; align-items:flex-start">
              <div>
                <div class="project-title">Data Leaks Detector (SQLi)</div>
                <div class="project-desc">Tools to detect SQL injection vulnerabilities and possible leak points.</div>
              </div>
              </div>
          </div>
        </div>
      </section>

      <section id="contact" class="container">
        <div class="floating-elements">
          <div class="floating-element" style="width: 70px; height: 70px; top: 20%; left: 85%; animation-delay: 10s;"></div>
          <div class="floating-element" style="width: 90px; height: 90px; top: 70%; left: 10%; animation-delay: 16s;"></div>
        </div>
        
        <h3 class="section-title">Contact Us</h3>
        <p class="lead">Have a project or idea? Click below to send us a message directly on **WhatsApp** for an immediate response!</p>

        <div class="contact-container">
          <a href="https://wa.me/923339070125?text=Hello%20DevStack-Vibes,%20I%20have%20a%20project%20I%20would%20like%20to%20discuss."
            class="btn fade-in"
            target="_blank"
            rel="noopener"
            style="font-size:1.1rem; padding:16px 28px;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg" style="margin-right:10px"><path d="M12 2C6.48 2 2 6.48 2 12c0 3.12 1.34 5.92 3.49 7.84L4 22l2.16-1.48c.59.32 1.25.55 1.94.69C9.13 21.6 10.51 22 12 22c5.52 0 10-4.48 10-10S17.52 2 12 2zm3.8 13.9c-.2-.1-.82-.41-1.19-.49-.37-.09-.64-.07-.90.37-.25.42-.51.48-.77.51-.27.03-.51.15-1.01-.31-.5-.47-2.11-1.3-2.73-2.31-.62-1.01-.13-1.57.29-1.99.37-.36.33-.67.17-.89-.16-.22-.37-.5-.56-.74-.2-.24-.4-.2-.56-.47-.16-.27-.85-2.26-1.16-3.09-.3-.83-.62-.7-.85-.71-.24-.01-.5-.01-.77.01-.27.02-.7.09-1.07.49-.37.4-.71.88-1.07 1.31-.36.43-.72.82-.72 1.49 0 .67.92 2.14 2.11 3.33 1.18 1.18 2.27 1.55 2.65 1.74.37.19.58.15.82-.09.24-.24 1.05-1.12 1.29-1.35.24-.24.47-.2.64-.13.20.09 1.25.59 1.48.71.24.12.40.18.45.28.05.10-.19.33-.36.52-.16.19-.38.29-.58.48z"/></svg>
            Chat with us on WhatsApp
          </a>

          <div class="note fade-in" style="margin-top:14px; text-align: center;">
            Or, if you prefer email, reach us directly at <strong>devstackvibes1@gmail.com</strong>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="footer">
    <div>Â© <span id="year"></span> DevStack-Vibes â€” Innovate with every stack</div>
    <div class="socials">
      <!-- Your social links -->
    </div>
  </footer>

  <button id="backTop" title="Back to top">â†‘ Top</button>

  <script>
    /********************************************
      * Online Storage with JSONBin.io
      ********************************************/
    // JSONBin.io configuration - USING YOUR ACTUAL CREDENTIALS
    const JSONBIN_BIN_ID = '69213cf2ae596e708f68cdf8';
    const JSONBIN_MASTER_KEY = '$2a$10$17gcoGYTp7Wk//N7o4KBQOJY90DS97rZ/SQlxFqUsmqSpHzjLh1uG';
    const JSONBIN_API_URL = 'https://api.jsonbin.io/v3/b';
    
    // Global data variables
    let users = [];
    let tasks = [];
    let announcements = [];
    let currentUser = JSON.parse(localStorage.getItem('devstack_currentUser')) || null;
    
    // Admin credentials
    const adminCredentials = {
      email: 'admin@devstack.com',
      password: 'admin123'
    };
    
    // WhatsApp Channel Link
    const whatsappChannelLink = 'https://whatsapp.com/channel/0029Vb6UeII6hENwhI0PMp1g';
    
    // Current task being edited
    let currentEditingTaskId = null;
    
    /********************************************
      * JSONBin.io API Functions
      ********************************************/
    
    // Fetch data from JSONBin.io
    async function fetchData() {
      try {
        console.log('Fetching data from JSONBin...');
        const response = await fetch(`${JSONBIN_API_URL}/${JSONBIN_BIN_ID}/latest`, {
          method: 'GET',
          headers: {
            'X-Master-Key': JSONBIN_MASTER_KEY,
            'Content-Type': 'application/json'
          }
        });
        
        if (!response.ok) {
          throw new Error(`Failed to fetch data: ${response.status}`);
        }
        
        const data = await response.json();
        console.log('Data fetched successfully:', data.record);
        return data.record || {
          users: [],
          tasks: [],
          announcements: [],
          lastSync: Date.now()
        };
      } catch (error) {
        console.error('Error fetching data:', error);
        // Return default data structure if fetch fails
        return {
          users: [],
          tasks: [],
          announcements: [],
          lastSync: Date.now()
        };
      }
    }
    
    // Update data on JSONBin.io
    async function updateData(newData) {
      try {
        console.log('Updating data on JSONBin...', newData);
        const response = await fetch(`${JSONBIN_API_URL}/${JSONBIN_BIN_ID}`, {
          method: 'PUT',
          headers: {
            'X-Master-Key': JSONBIN_MASTER_KEY,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            ...newData,
            lastSync: Date.now()
          })
        });
        
        if (!response.ok) {
          throw new Error(`Failed to update data: ${response.status}`);
        }
        
        const result = await response.json();
        console.log('Data updated successfully:', result.record);
        return result.record;
      } catch (error) {
        console.error('Error updating data:', error);
        throw error;
      }
    }
    
    // Sync local data with online storage
    async function syncData() {
      try {
        const onlineData = await fetchData();
        
        // Update local variables with online data
        users = [...onlineData.users];
        tasks = [...onlineData.tasks];
        announcements = [...onlineData.announcements];
        
        // Update local storage for backward compatibility
        localStorage.setItem('devstack_users', JSON.stringify(users));
        localStorage.setItem('devstack_tasks', JSON.stringify(tasks));
        localStorage.setItem('devstack_announcements', JSON.stringify(announcements));
        
        console.log('Data synced successfully. Users:', users.length, 'Tasks:', tasks.length, 'Announcements:', announcements.length);
        return onlineData;
      } catch (error) {
        console.error('Error syncing data:', error);
        // Fallback to local storage if online sync fails
        users = JSON.parse(localStorage.getItem('devstack_users')) || [];
        tasks = JSON.parse(localStorage.getItem('devstack_tasks')) || [];
        announcements = JSON.parse(localStorage.getItem('devstack_announcements')) || [];
        return { users, tasks, announcements };
      }
    }
    
    // Show loading state
    function showLoading(button) {
      const originalText = button.innerHTML;
      button.innerHTML = '<span class="loading"></span> Loading...';
      button.disabled = true;
      return originalText;
    }
    
    // Hide loading state
    function hideLoading(button, originalText) {
      button.innerHTML = originalText;
      button.disabled = false;
    }

    /********************************************
      * Theme toggle and basic functionality
      ********************************************/
    const root = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');

    // initial: choose from localStorage or system preference
    const saved = localStorage.getItem('ds_theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
    function applyTheme(t){
      if(t === 'light') root.classList.add('light');
      else root.classList.remove('light');
      localStorage.setItem('ds_theme', t);
      themeToggle.textContent = t === 'light' ? 'ðŸŒž' : 'ðŸŒ™';
    }
    applyTheme(saved);

    themeToggle.addEventListener('click', ()=>{
      const next = root.classList.contains('light') ? 'dark' : 'light';
      applyTheme(next);
    });

    /********************************************
      * Scroll animations and effects
      ********************************************/
    window.addEventListener('load', ()=>{
      document.getElementById('year').textContent = new Date().getFullYear();
      
      // Header scroll effect
      window.addEventListener('scroll', ()=>{
        const header = document.querySelector('header');
        const btn = document.getElementById('backTop');
        
        if(window.scrollY > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
        
        if(window.scrollY > 400) btn.style.display = 'block'; 
        else btn.style.display = 'none';
      });
      
      // Fade in elements on scroll
      const fadeElements = document.querySelectorAll('.fade-in');
      const fadeInOnScroll = () => {
        fadeElements.forEach(element => {
          const elementTop = element.getBoundingClientRect().top;
          const elementVisible = 150;
          
          if (elementTop < window.innerHeight - elementVisible) {
            element.classList.add('visible');
          }
        });
      };
      
      // Initial check
      fadeInOnScroll();
      // Check on scroll
      window.addEventListener('scroll', fadeInOnScroll);
    });

    document.getElementById('backTop').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    /********************************************
      * Projects: open project on click
      ********************************************/
    function openProject(url){
      window.open(url, '_blank', 'noopener');
    }

    /********************************************
      * Authentication System with Online Storage
      ********************************************/
    
    // Initialize the page based on login status
    async function initPage() {
      // Sync data from online storage
      await syncData();
      
      if (currentUser) {
        if (currentUser.role === 'admin') {
          showAdminPanel();
        } else {
          showDashboard();
        }
      } else {
        showMainContent();
      }
      
      // Add navigation event listeners
      setupNavigation();
      
      // Set up periodic data sync (every 10 seconds)
      setInterval(syncData, 10000);
    }
    
    // Setup navigation event listeners
    function setupNavigation() {
      // Navigation links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          
          // If we're in auth mode, show main content first
          if (document.getElementById('auth').style.display === 'block') {
            showMainContent();
          }
          
          // Scroll to the target section
          const targetElement = document.getElementById(targetId);
          if (targetElement) {
            window.scrollTo({
              top: targetElement.offsetTop - 80,
              behavior: 'smooth'
            });
          }
        });
      });
    }
    
    // Show main website content
    function showMainContent() {
      document.getElementById('main-content').style.display = 'block';
      document.getElementById('auth').style.display = 'none';
      document.getElementById('dashboard').style.display = 'none';
      document.getElementById('admin-panel').style.display = 'none';
    }
    
    // Show authentication section
    function showAuth() {
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('auth').style.display = 'block';
      document.getElementById('dashboard').style.display = 'none';
      document.getElementById('admin-panel').style.display = 'none';
    }
    
    // Show user dashboard
    function showDashboard() {
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('auth').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      document.getElementById('admin-panel').style.display = 'none';
      
      // Update user info
      document.getElementById('user-name').textContent = currentUser.name;
      document.getElementById('user-role').textContent = currentUser.role;
      
      // Load user data
      loadUserTasks();
      loadUserAnnouncements();
      loadUserPerformance();
      loadProfileInfo();
    }
    
    // Show admin panel
    function showAdminPanel() {
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('auth').style.display = 'none';
      document.getElementById('dashboard').style.display = 'none';
      document.getElementById('admin-panel').style.display = 'block';
      
      // Load admin data
      loadUsers();
      loadAdminTasks();
      loadAdminAnnouncements();
      loadAdminAnalytics();
    }
    
    // Authentication tab switching
    document.querySelectorAll('.auth-tab').forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active class from all tabs and forms
        document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
        
        // Add active class to clicked tab and corresponding form
        this.classList.add('active');
        document.getElementById(`${this.dataset.tab}-form`).classList.add('active');
      });
    });
    
    // Dashboard navigation
    document.querySelectorAll('.dashboard-nav-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Remove active class from all links and sections
        document.querySelectorAll('.dashboard-nav-link').forEach(l => l.classList.remove('active'));
        document.querySelectorAll('.dashboard-section').forEach(s => s.classList.remove('active'));
        
        // Add active class to clicked link and corresponding section
        this.classList.add('active');
        document.getElementById(`${this.dataset.section}-section`).classList.add('active');
      });
    });
    
    // Admin navigation
    document.querySelectorAll('.admin-nav-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Remove active class from all links and sections
        document.querySelectorAll('.admin-nav-link').forEach(l => l.classList.remove('active'));
        document.querySelectorAll('.dashboard-section').forEach(s => s.classList.remove('active'));
        
        // Add active class to clicked link and corresponding section
        this.classList.add('active');
        document.getElementById(`${this.dataset.section}-section`).classList.add('active');
      });
    });
    
    // Login function
    async function login() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      const messageEl = document.getElementById('login-message');
      const button = document.querySelector('#login-form .btn');
      const originalText = showLoading(button);
      
      try {
        // Sync data first to get latest users
        await syncData();
        
        // Check if admin credentials
        if (email === adminCredentials.email && password === adminCredentials.password) {
          currentUser = {
            id: 'admin',
            name: 'Admin',
            email: adminCredentials.email,
            role: 'admin'
          };
          localStorage.setItem('devstack_currentUser', JSON.stringify(currentUser));
          messageEl.innerHTML = '<div class="msg success">Admin login successful! Redirecting...</div>';
          setTimeout(() => {
            showAdminPanel();
          }, 1000);
          return;
        }
        
        // Find regular user
        const user = users.find(u => u.email === email && u.password === password);
        
        if (user) {
          currentUser = user;
          localStorage.setItem('devstack_currentUser', JSON.stringify(currentUser));
          messageEl.innerHTML = '<div class="msg success">Login successful! Redirecting...</div>';
          setTimeout(() => {
            showDashboard();
          }, 1000);
        } else {
          messageEl.innerHTML = '<div class="msg error">Invalid email or password</div>';
        }
      } catch (error) {
        messageEl.innerHTML = '<div class="msg error">Network error. Please try again.</div>';
      } finally {
        hideLoading(button, originalText);
      }
    }
    
    // Signup function
    async function signup() {
      const name = document.getElementById('signup-name').value;
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      const role = document.getElementById('signup-role').value;
      const messageEl = document.getElementById('signup-message');
      const button = document.querySelector('#signup-form .btn');
      const originalText = showLoading(button);
      
      try {
        // Sync data first to check for existing users
        await syncData();
        
        // Check if user already exists
        if (users.find(u => u.email === email)) {
          messageEl.innerHTML = '<div class="msg error">User with this email already exists</div>';
          hideLoading(button, originalText);
          return;
        }
        
        // Create new user
        const newUser = {
          id: Date.now().toString(),
          name,
          email,
          password,
          role,
          joined: new Date().toISOString().split('T')[0],
          completedTasks: 0,
          pendingTasks: 0
        };
        
        // Update both local and online storage
        users.push(newUser);
        await updateData({ users, tasks, announcements });
        
        // Show success message
        messageEl.innerHTML = `
          <div class="msg success">Account created successfully! You can now login.</div>
          <div class="whatsapp-banner">
            <h4>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="#25D366">
                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
              </svg>
              Join Our WhatsApp Channel
            </h4>
            <p>Stay updated with the latest news, announcements, and community discussions</p>
            <a href="${whatsappChannelLink}" target="_blank" class="btn btn-whatsapp" style="width: 100%;">
              Join WhatsApp Channel
            </a>
          </div>
        `;
        
        // Switch to login tab after 3 seconds
        setTimeout(() => {
          document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
          document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
          document.querySelector('[data-tab="login"]').classList.add('active');
          document.getElementById('login-form').classList.add('active');
        }, 3000);
        
        // Clear form
        document.getElementById('signup-name').value = '';
        document.getElementById('signup-email').value = '';
        document.getElementById('signup-password').value = '';
        
      } catch (error) {
        messageEl.innerHTML = '<div class="msg error">Network error. Please try again.</div>';
      } finally {
        hideLoading(button, originalText);
      }
    }
    
    // Logout function
    function logout() {
      currentUser = null;
      localStorage.removeItem('devstack_currentUser');
      showMainContent();
    }
    
    // Load user tasks
    function loadUserTasks() {
      const container = document.getElementById('tasks-container');
      const userTasks = tasks.filter(task => 
        task.assignedTo === 'all' || 
        (Array.isArray(task.assignedTo) && task.assignedTo.includes(currentUser.id))
      );
      
      if (userTasks.length === 0) {
        container.innerHTML = '<div class="card" style="text-align: center; padding: 40px;"><p>No tasks assigned yet. Check back later!</p></div>';
        return;
      }
      
      container.innerHTML = userTasks.map(task => `
        <div class="task-card">
          <div class="task-header">
            <h4 class="task-title">${task.title}</h4>
            <div class="task-status ${task.status === 'completed' ? 'status-completed' : 'status-pending'}">
              ${task.status === 'completed' ? 'Completed' : 'Pending'}
            </div>
          </div>
          <p class="task-desc">${task.description}</p>
          <div class="task-meta">
            <span>Due: ${task.deadline}</span>
            <span>Assigned: ${task.assignedDate}</span>
          </div>
          ${task.classroomLink ? 
            `<a href="${task.classroomLink}" target="_blank" class="btn btn-small" style="margin-top: 10px;">View in Classroom</a>` : 
            ''
          }
          ${task.status !== 'completed' ? 
            `<button class="btn btn-small" onclick="completeTask('${task.id}')" style="margin-top: 10px;">Mark as Complete</button>` : 
            ''
          }
        </div>
      `).join('');
    }
    
    // Load user announcements
    function loadUserAnnouncements() {
      const container = document.getElementById('announcements-container');
      
      if (announcements.length === 0) {
        container.innerHTML = '<div class="card" style="text-align: center; padding: 40px;"><p>No announcements yet. Check back later!</p></div>';
        return;
      }
      
      container.innerHTML = announcements.map(announcement => `
        <div class="announcement-card">
          <div class="announcement-header">
            <h4 class="announcement-title">${announcement.title}</h4>
            <div class="announcement-date">${announcement.date}</div>
          </div>
          <p class="announcement-desc">${announcement.description}</p>
        </div>
      `).join('');
    }
    
    // Load user performance
    function loadUserPerformance() {
      const userTasks = tasks.filter(task => 
        task.assignedTo === 'all' || 
        (Array.isArray(task.assignedTo) && task.assignedTo.includes(currentUser.id))
      );
      
      const completed = userTasks.filter(task => task.status === 'completed').length;
      const pending = userTasks.filter(task => task.status === 'pending').length;
      const total = userTasks.length;
      const successRate = total > 0 ? Math.round((completed / total) * 100) : 0;
      
      document.getElementById('completed-tasks').textContent = completed;
      document.getElementById('pending-tasks').textContent = pending;
      document.getElementById('success-rate').textContent = `${successRate}%`;
    }
    
    // Load profile information
    function loadProfileInfo() {
      document.getElementById('profile-name').value = currentUser.name;
      document.getElementById('profile-email').value = currentUser.email;
      document.getElementById('profile-role').value = currentUser.role;
      document.getElementById('profile-joined').value = currentUser.joined;
    }
    
    // Update profile
    async function updateProfile() {
      const name = document.getElementById('profile-name').value;
      const button = document.querySelector('#profile-section .btn');
      const originalText = showLoading(button);
      
      try {
        if (name && name !== currentUser.name) {
          // Update user in storage
          const userIndex = users.findIndex(u => u.id === currentUser.id);
          if (userIndex !== -1) {
            users[userIndex].name = name;
            await updateData({ users, tasks, announcements });
            
            // Update current user
            currentUser.name = name;
            localStorage.setItem('devstack_currentUser', JSON.stringify(currentUser));
            
            // Update UI
            document.getElementById('user-name').textContent = name;
            alert('Profile updated successfully!');
          }
        }
      } catch (error) {
        alert('Error updating profile. Please try again.');
      } finally {
        hideLoading(button, originalText);
      }
    }
    
    // Complete a task
    async function completeTask(taskId) {
      const taskIndex = tasks.findIndex(t => t.id === taskId);
      if (taskIndex !== -1) {
        tasks[taskIndex].status = 'completed';
        tasks[taskIndex].completedDate = new Date().toISOString().split('T')[0];
        
        try {
          await updateData({ users, tasks, announcements });
          
          // Update user stats
          const userIndex = users.findIndex(u => u.id === currentUser.id);
          if (userIndex !== -1) {
            users[userIndex].completedTasks = (users[userIndex].completedTasks || 0) + 1;
            users[userIndex].pendingTasks = Math.max(0, (users[userIndex].pendingTasks || 0) - 1);
            await updateData({ users, tasks, announcements });
          }
          
          loadUserTasks();
          loadUserPerformance();
        } catch (error) {
          alert('Error completing task. Please try again.');
        }
      }
    }
    
    // Load users for admin
    function loadUsers() {
      const container = document.getElementById('users-container');
      
      if (users.length === 0) {
        container.innerHTML = '<div class="card" style="text-align: center; padding: 40px;"><p>No users registered yet.</p></div>';
        return;
      }
      
      container.innerHTML = users.map(user => `
        <div class="user-card">
          <div class="user-header">
            <div class="user-info">
              <h4>${user.name}</h4>
              <p>${user.email} â€¢ ${user.role} â€¢ Joined: ${user.joined}</p>
            </div>
            <div class="user-actions">
              <button class="btn btn-small btn-danger" onclick="deleteUser('${user.id}')">Delete</button>
            </div>
          </div>
          <div class="task-meta">
            <span>Completed Tasks: ${user.completedTasks || 0}</span>
            <span>Pending Tasks: ${user.pendingTasks || 0}</span>
          </div>
        </div>
      `).join('');
    }
    
    // Load tasks for admin
    function loadAdminTasks() {
      const container = document.getElementById('admin-tasks-container');
      
      if (tasks.length === 0) {
        container.innerHTML = '<div class="card" style="text-align: center; padding: 40px;"><p>No tasks created yet.</p></div>';
        return;
      }
      
      container.innerHTML = tasks.map(task => `
        <div class="task-card">
          <div class="task-header">
            <h4 class="task-title">${task.title}</h4>
            <div class="task-status ${task.status === 'completed' ? 'status-completed' : 'status-pending'}">
              ${task.status === 'completed' ? 'Completed' : 'Active'}
            </div>
          </div>
          <p class="task-desc">${task.description}</p>
          <div class="task-meta">
            <span>Due: ${task.deadline}</span>
            <span>Assigned: ${task.assignedDate}</span>
            <span>Assigned to: ${task.assignedTo === 'all' ? 'All Users' : 'Specific Users'}</span>
          </div>
          <div class="task-actions">
            ${task.classroomLink ? 
              `<a href="${task.classroomLink}" target="_blank" class="btn btn-small">View Classroom</a>` : 
              ''
            }
            <button class="btn btn-small btn-warning" onclick="openEditModal('${task.id}')">Edit</button>
            <button class="btn btn-small btn-danger" onclick="deleteTask('${task.id}')">Delete</button>
          </div>
        </div>
      `).join('');
    }
    
    // Load announcements for admin
    function loadAdminAnnouncements() {
      const container = document.getElementById('admin-announcements-container');
      
      if (announcements.length === 0) {
        container.innerHTML = '<div class="card" style="text-align: center; padding: 40px;"><p>No announcements created yet.</p></div>';
        return;
      }
      
      container.innerHTML = announcements.map(announcement => `
        <div class="announcement-card">
          <div class="announcement-header">
            <h4 class="announcement-title">${announcement.title}</h4>
            <div class="announcement-date">${announcement.date}</div>
          </div>
          <p class="announcement-desc">${announcement.description}</p>
          <div class="task-actions">
            <button class="btn btn-small btn-danger" onclick="deleteAnnouncement('${announcement.id}')">Delete</button>
          </div>
        </div>
      `).join('');
    }
    
    // Load admin analytics
    function loadAdminAnalytics() {
      document.getElementById('total-users').textContent = users.length;
      document.getElementById('active-tasks').textContent = tasks.filter(t => t.status === 'pending').length;
      
      const totalTasks = tasks.length;
      const completedTasks = tasks.filter(t => t.status === 'completed').length;
      const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
      
      document.getElementById('completion-rate').textContent = `${completionRate}%`;
    }
    
    // Create a new task (admin only)
    async function createTask() {
      const title = document.getElementById('task-title').value;
      const description = document.getElementById('task-description').value;
      const deadline = document.getElementById('task-deadline').value;
      const classroomLink = document.getElementById('task-classroom-link').value;
      const button = document.querySelector('#task-management-section .btn');
      const originalText = showLoading(button);
      
      try {
        if (!title || !description || !deadline) {
          alert('Please fill in all required fields');
          hideLoading(button, originalText);
          return;
        }
        
        const newTask = {
          id: Date.now().toString(),
          title,
          description,
          deadline,
          assignedTo: 'all',
          assignedDate: new Date().toISOString().split('T')[0],
          status: 'pending',
          classroomLink: classroomLink || null
        };
        
        tasks.push(newTask);
        
        // Update user pending tasks count
        users.forEach(user => {
          user.pendingTasks = (user.pendingTasks || 0) + 1;
        });
        
        await updateData({ users, tasks, announcements });
        
        // Clear form
        document.getElementById('task-title').value = '';
        document.getElementById('task-description').value = '';
        document.getElementById('task-deadline').value = '';
        
        // Reload tasks
        loadAdminTasks();
        loadAdminAnalytics();
        
        alert('Task created and assigned to all users!');
      } catch (error) {
        alert('Error creating task. Please try again.');
      } finally {
        hideLoading(button, originalText);
      }
    }
    
    // Create a new announcement (admin only)
    async function createAnnouncement() {
      const title = document.getElementById('announcement-title').value;
      const description = document.getElementById('announcement-description').value;
      const button = document.querySelector('#announcements-management-section .btn');
      const originalText = showLoading(button);
      
      try {
        if (!title || !description) {
          alert('Please fill in all required fields');
          hideLoading(button, originalText);
          return;
        }
        
        const newAnnouncement = {
          id: Date.now().toString(),
          title,
          description,
          date: new Date().toISOString().split('T')[0]
        };
        
        announcements.push(newAnnouncement);
        await updateData({ users, tasks, announcements });
        
        // Clear form
        document.getElementById('announcement-title').value = '';
        document.getElementById('announcement-description').value = '';
        
        // Reload announcements
        loadAdminAnnouncements();
        
        alert('Announcement sent to all users!');
      } catch (error) {
        alert('Error creating announcement. Please try again.');
      } finally {
        hideLoading(button, originalText);
      }
    }
    
    // Delete a user (admin only)
    async function deleteUser(userId) {
      if (confirm('Are you sure you want to delete this user? This action cannot be undone.')) {
        users = users.filter(user => user.id !== userId);
        try {
          await updateData({ users, tasks, announcements });
          loadUsers();
          loadAdminAnalytics();
        } catch (error) {
          alert('Error deleting user. Please try again.');
        }
      }
    }
    
    // Delete a task (admin only)
    async function deleteTask(taskId) {
      if (confirm('Are you sure you want to delete this task? This action cannot be undone.')) {
        tasks = tasks.filter(task => task.id !== taskId);
        
        try {
          // Update user task counts
          users.forEach(user => {
            user.pendingTasks = Math.max(0, (user.pendingTasks || 0) - 1);
          });
          
          await updateData({ users, tasks, announcements });
          
          // Reload admin tasks
          loadAdminTasks();
          loadAdminAnalytics();
          
          alert('Task deleted successfully!');
        } catch (error) {
          alert('Error deleting task. Please try again.');
        }
      }
    }
    
    // Delete an announcement (admin only)
    async function deleteAnnouncement(announcementId) {
      if (confirm('Are you sure you want to delete this announcement? This action cannot be undone.')) {
        announcements = announcements.filter(announcement => announcement.id !== announcementId);
        try {
          await updateData({ users, tasks, announcements });
          loadAdminAnnouncements();
          alert('Announcement deleted successfully!');
        } catch (error) {
          alert('Error deleting announcement. Please try again.');
        }
      }
    }
    
    // Open edit task modal
    function openEditModal(taskId) {
      const task = tasks.find(t => t.id === taskId);
      if (task) {
        currentEditingTaskId = taskId;
        
        // Fill form with current task data
        document.getElementById('edit-task-title').value = task.title;
        document.getElementById('edit-task-description').value = task.description;
        document.getElementById('edit-task-deadline').value = task.deadline;
        document.getElementById('edit-task-status').value = task.status;
        document.getElementById('edit-task-classroom-link').value = task.classroomLink || '';
        
        // Show modal
        document.getElementById('editTaskModal').style.display = 'flex';
      }
    }
    
    // Close edit task modal
    function closeEditModal() {
      document.getElementById('editTaskModal').style.display = 'none';
      currentEditingTaskId = null;
    }
    
    // Update task (admin only)
    async function updateTask() {
      if (!currentEditingTaskId) return;
      
      const taskIndex = tasks.findIndex(t => t.id === currentEditingTaskId);
      if (taskIndex !== -1) {
        const title = document.getElementById('edit-task-title').value;
        const description = document.getElementById('edit-task-description').value;
        const deadline = document.getElementById('edit-task-deadline').value;
        const status = document.getElementById('edit-task-status').value;
        const classroomLink = document.getElementById('edit-task-classroom-link').value;
        const button = document.querySelector('#editTaskModal .btn');
        const originalText = showLoading(button);
        
        try {
          if (!title || !description || !deadline) {
            alert('Please fill in all required fields');
            hideLoading(button, originalText);
            return;
          }
          
          // Update task
          tasks[taskIndex].title = title;
          tasks[taskIndex].description = description;
          tasks[taskIndex].deadline = deadline;
          tasks[taskIndex].status = status;
          tasks[taskIndex].classroomLink = classroomLink || null;
          
          await updateData({ users, tasks, announcements });
          
          // Reload admin tasks
          loadAdminTasks();
          loadAdminAnalytics();
          
          // Close modal
          closeEditModal();
          
          alert('Task updated successfully!');
        } catch (error) {
          alert('Error updating task. Please try again.');
        } finally {
          hideLoading(button, originalText);
        }
      }
    }
    
    // Initialize the page
    initPage();
    
    // Auth link click handler
    document.getElementById('authLink').addEventListener('click', function(e) {
      e.preventDefault();
      showAuth();
    });
    
    // Join Us button click handler in header
    document.getElementById('joinUsBtn').addEventListener('click', function(e) {
      e.preventDefault();
      showAuth();
    });
    
    // Join Us button click handler in hero section
    document.getElementById('heroJoinUsBtn').addEventListener('click', function(e) {
      e.preventDefault();
      showAuth();
    });
    
    // Close modal when clicking outside
    document.getElementById('editTaskModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeEditModal();
      }
    });
  </script>
</body>
</html>
